(window.webpackJsonp=window.webpackJsonp||[]).push([[27],{443:function(t,e,a){"use strict";a.r(e);var n=a(2),s=Object(n.a)({},(function(){var t=this,e=t._self._c;return e("ContentSlotsDistributor",{attrs:{"slot-key":t.$parent.slotKey}},[e("h2",{attrs:{id:"应用级事件"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#应用级事件"}},[t._v("#")]),t._v(" 应用级事件")]),t._v(" "),e("h3",{attrs:{id:"_1-wx-onappshow-function-listener"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#_1-wx-onappshow-function-listener"}},[t._v("#")]),t._v(" 1.wx.onAppShow(function listener)")]),t._v(" "),e("h4",{attrs:{id:"功能描述-监听小程序切前台事件。该事件与-app-onshow-的回调参数一致。"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#功能描述-监听小程序切前台事件。该事件与-app-onshow-的回调参数一致。"}},[t._v("#")]),t._v(" 功能描述：监听小程序切前台事件。该事件与 App.onShow 的回调参数一致。")]),t._v(" "),e("h3",{attrs:{id:"_2-wx-onapphide-function-listener"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#_2-wx-onapphide-function-listener"}},[t._v("#")]),t._v(" 2.wx.onAppHide(function listener)")]),t._v(" "),e("h4",{attrs:{id:"功能描述-监听小程序切前台事件。该事件与-app-onhide-的回调参数一致。"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#功能描述-监听小程序切前台事件。该事件与-app-onhide-的回调参数一致。"}},[t._v("#")]),t._v(" 功能描述：监听小程序切前台事件。该事件与 App.onHide 的回调参数一致。")]),t._v(" "),e("h2",{attrs:{id:"页面生命周期"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#页面生命周期"}},[t._v("#")]),t._v(" 页面生命周期")]),t._v(" "),e("h3",{attrs:{id:"_1-使用-page-构造器注册页面"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#_1-使用-page-构造器注册页面"}},[t._v("#")]),t._v(" 1.使用 Page 构造器注册页面")]),t._v(" "),e("h4",{attrs:{id:"功能描述-简单的页面可以使用-page-进行构造。"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#功能描述-简单的页面可以使用-page-进行构造。"}},[t._v("#")]),t._v(" 功能描述：简单的页面可以使用 Page() 进行构造。")]),t._v(" "),e("h4",{attrs:{id:"代码示例"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#代码示例"}},[t._v("#")]),t._v(" 代码示例：")]),t._v(" "),e("div",{staticClass:"language- extra-class"},[e("pre",{pre:!0,attrs:{class:"language-text"}},[e("code",[t._v("//index.js\nPage({\n  data: {\n    text: \"This is page data.\"\n  },\n  onLoad: function(options) {\n    // 页面创建时执行\n  },\n  onShow: function() {\n    // 页面出现在前台时执行\n  },\n  onReady: function() {\n    // 页面首次渲染完毕时执行\n  },\n  onHide: function() {\n    // 页面从前台变为后台时执行\n  },\n  onUnload: function() {\n    // 页面销毁时执行\n  },\n  onPullDownRefresh: function() {\n    // 触发下拉刷新时执行\n  },\n  onReachBottom: function() {\n    // 页面触底时执行\n  },\n  onShareAppMessage: function () {\n    // 页面被用户分享时执行\n  },\n  onPageScroll: function() {\n    // 页面滚动时执行\n  },\n  onResize: function() {\n    // 页面尺寸变化时执行\n  },\n  onTabItemTap(item) {\n    // tab 点击时执行\n    console.log(item.index)\n    console.log(item.pagePath)\n    console.log(item.text)\n  },\n  // 事件响应函数\n  viewTap: function() {\n    this.setData({\n      text: 'Set some data for updating view.'\n    }, function() {\n      // this is setData callback\n    })\n  },\n  // 自由数据\n  customData: {\n    hi: 'MINA'\n  }\n})\n")])])]),e("h3",{attrs:{id:"_2-在页面中使用-behaviors"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#_2-在页面中使用-behaviors"}},[t._v("#")]),t._v(" 2.在页面中使用 behaviors")]),t._v(" "),e("h4",{attrs:{id:"功能描述-页面可以引用-behaviors-。-behaviors-可以用来让多个页面有相同的数据字段和方法。"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#功能描述-页面可以引用-behaviors-。-behaviors-可以用来让多个页面有相同的数据字段和方法。"}},[t._v("#")]),t._v(" 功能描述：页面可以引用 behaviors 。 behaviors 可以用来让多个页面有相同的数据字段和方法。")]),t._v(" "),e("h4",{attrs:{id:"代码示例-2"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#代码示例-2"}},[t._v("#")]),t._v(" 代码示例：")]),t._v(" "),e("div",{staticClass:"language-// my-behavior.js extra-class"},[e("pre",{pre:!0,attrs:{class:"language-text"}},[e("code",[t._v("module.exports = Behavior({\n  data: {\n    sharedText: 'This is a piece of data shared between pages.'\n  },\n  methods: {\n    sharedMethod: function() {\n      this.data.sharedText === 'This is a piece of data shared between pages.'\n    }\n  }\n})\n")])])]),e("div",{staticClass:"language- extra-class"},[e("pre",{pre:!0,attrs:{class:"language-text"}},[e("code",[t._v("// page-a.js\nvar myBehavior = require('./my-behavior.js')\nPage({\n  behaviors: [myBehavior],\n  onLoad: function() {\n    this.data.sharedText === 'This is a piece of data shared between pages.'\n  }\n})\n")])])]),e("h3",{attrs:{id:"_3-使用-component-构造器构造页面"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#_3-使用-component-构造器构造页面"}},[t._v("#")]),t._v(" 3.使用 Component 构造器构造页面")]),t._v(" "),e("h4",{attrs:{id:"功能描述-使用-component-构造器来构造页面。-component-构造器的主要区别是-方法需要放在-methods-里面。"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#功能描述-使用-component-构造器来构造页面。-component-构造器的主要区别是-方法需要放在-methods-里面。"}},[t._v("#")]),t._v(" 功能描述：使用 Component 构造器来构造页面。 Component 构造器的主要区别是：方法需要放在 methods: { } 里面。")]),t._v(" "),e("h4",{attrs:{id:"代码示例-3"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#代码示例-3"}},[t._v("#")]),t._v(" 代码示例：")]),t._v(" "),e("div",{staticClass:"language- extra-class"},[e("pre",{pre:!0,attrs:{class:"language-text"}},[e("code",[t._v('Component({\n  data: {\n    text: "This is page data."\n  },\n  methods: {\n    onLoad: function(options) {\n      // 页面创建时执行\n    },\n    onPullDownRefresh: function() {\n      // 下拉刷新时执行\n    },\n    // 事件响应函数\n    viewTap: function() {\n      // ...\n    }\n  }\n})\n')])])]),e("h2",{attrs:{id:"组件生命周期"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#组件生命周期"}},[t._v("#")]),t._v(" 组件生命周期")]),t._v(" "),e("p",[t._v("组件的生命周期，指的是组件自身的一些函数，这些函数在特殊的时间点或遇到一些特殊的框架事件时被自动触发。")]),t._v(" "),e("p",[t._v("其中，最重要的生命周期是 "),e("code",[t._v("created")]),t._v(" "),e("code",[t._v("attached")]),t._v(" "),e("code",[t._v("detached")]),t._v(" ，包含一个组件实例生命流程的最主要时间点。")]),t._v(" "),e("ul",[e("li",[e("p",[t._v("组件实例刚刚被创建好时， "),e("code",[t._v("created")]),t._v(" 生命周期被触发。此时，组件数据 "),e("code",[t._v("this.data")]),t._v(" 就是在 "),e("code",[t._v("Component")]),t._v(" 构造器中定义的数据 "),e("code",[t._v("data")]),t._v(" 。 "),e("strong",[t._v("此时还不能调用 "),e("code",[t._v("setData")]),t._v(" 。")]),t._v(" 通常情况下，这个生命周期只应该用于给组件 "),e("code",[t._v("this")]),t._v(" 添加一些自定义属性字段。")])]),t._v(" "),e("li",[e("p",[t._v("在组件完全初始化完毕、进入页面节点树后， "),e("code",[t._v("attached")]),t._v(" 生命周期被触发。此时， "),e("code",[t._v("this.data")]),t._v(" 已被初始化为组件的当前值。这个生命周期很有用，绝大多数初始化工作可以在这个时机进行。")])]),t._v(" "),e("li",[e("p",[t._v("在组件离开页面节点树后， "),e("code",[t._v("detached")]),t._v(" 生命周期被触发。退出一个页面时，如果组件还在页面节点树中，则 "),e("code",[t._v("detached")]),t._v(" 会被触发。")]),t._v(" "),e("h3",{attrs:{id:"定义生命周期方法"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#定义生命周期方法"}},[t._v("#")]),t._v(" 定义生命周期方法")]),t._v(" "),e("p",[t._v("生命周期方法可以直接定义在 "),e("code",[t._v("Component")]),t._v(" 构造器的第一级参数中。")]),t._v(" "),e("p",[t._v("自小程序基础库版本 "),e("a",{attrs:{href:"https://developers.weixin.qq.com/miniprogram/dev/framework/compatibility.html",target:"_blank",rel:"noopener noreferrer"}},[t._v("2.2.3"),e("OutboundLink")],1),t._v(" 起，组件的的生命周期也可以在 "),e("code",[t._v("lifetimes")]),t._v(" 字段内进行声明（这是推荐的方式，其优先级最高）。")]),t._v(" "),e("div",{staticClass:"language- extra-class"},[e("pre",{pre:!0,attrs:{class:"language-text"}},[e("code",[t._v("Component({\n  lifetimes: {\n    attached: function() {\n      // 在组件实例进入页面节点树时执行\n    },\n    detached: function() {\n      // 在组件实例被从页面节点树移除时执行\n    },\n  },\n  // 以下是旧式的定义方式，可以保持对 <2.2.3 版本基础库的兼容\n  attached: function() {\n    // 在组件实例进入页面节点树时执行\n  },\n  detached: function() {\n    // 在组件实例被从页面节点树移除时执行\n  },\n  // ...\n})\n")])])]),e("p",[t._v("可用的全部生命周期如下表所示：")]),t._v(" "),e("table",[e("thead",[e("tr",[e("th",{staticStyle:{"text-align":"center"}},[t._v("生命周期")]),t._v(" "),e("th",{staticStyle:{"text-align":"center"}},[t._v("参数")]),t._v(" "),e("th",{staticStyle:{"text-align":"center"}},[t._v("描述")])])]),t._v(" "),e("tbody",[e("tr",[e("td",{staticStyle:{"text-align":"center"}},[t._v("created")]),t._v(" "),e("td",{staticStyle:{"text-align":"center"}},[t._v("无")]),t._v(" "),e("td",{staticStyle:{"text-align":"center"}},[t._v("在组件实例刚刚被创建时执行")])]),t._v(" "),e("tr",[e("td",{staticStyle:{"text-align":"center"}},[t._v("attached")]),t._v(" "),e("td",{staticStyle:{"text-align":"center"}},[t._v("无")]),t._v(" "),e("td",{staticStyle:{"text-align":"center"}},[t._v("在组件实例进入页面节点树时执行")])]),t._v(" "),e("tr",[e("td",{staticStyle:{"text-align":"center"}},[t._v("ready")]),t._v(" "),e("td",{staticStyle:{"text-align":"center"}},[t._v("无")]),t._v(" "),e("td",{staticStyle:{"text-align":"center"}},[t._v("在组件在视图层布局完成后执行")])]),t._v(" "),e("tr",[e("td",{staticStyle:{"text-align":"center"}},[t._v("moved")]),t._v(" "),e("td",{staticStyle:{"text-align":"center"}},[t._v("无")]),t._v(" "),e("td",{staticStyle:{"text-align":"center"}},[t._v("在组件实例被移动到节点树另一个位置时执行")])]),t._v(" "),e("tr",[e("td",{staticStyle:{"text-align":"center"}},[t._v("detached")]),t._v(" "),e("td",{staticStyle:{"text-align":"center"}},[t._v("无")]),t._v(" "),e("td",{staticStyle:{"text-align":"center"}},[t._v("在组件实例被从页面节点树移除时执行")])]),t._v(" "),e("tr",[e("td",{staticStyle:{"text-align":"center"}},[t._v("error")]),t._v(" "),e("td",{staticStyle:{"text-align":"center"}},[t._v("Object Error")]),t._v(" "),e("td",{staticStyle:{"text-align":"center"}},[t._v("每当组件方法抛出错误时执行")])])])]),t._v(" "),e("h3",{attrs:{id:"组件所在页面的生命周期"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#组件所在页面的生命周期"}},[t._v("#")]),t._v(" 组件所在页面的生命周期")]),t._v(" "),e("p",[t._v("还有一些特殊的生命周期，它们并非与组件有很强的关联，但有时组件需要获知，以便组件内部处理。这样的生命周期称为“组件所在页面的生命周期”，在 "),e("code",[t._v("pageLifetimes")]),t._v(" 定义段中定义。其中可用的生命周期包括：")]),t._v(" "),e("table",[e("thead",[e("tr",[e("th",{staticStyle:{"text-align":"center"}},[t._v("生命周期")]),t._v(" "),e("th",{staticStyle:{"text-align":"center"}},[t._v("参数")]),t._v(" "),e("th",{staticStyle:{"text-align":"center"}},[t._v("描述")])])]),t._v(" "),e("tbody",[e("tr",[e("td",{staticStyle:{"text-align":"center"}},[t._v("show")]),t._v(" "),e("td",{staticStyle:{"text-align":"center"}},[t._v("无")]),t._v(" "),e("td",{staticStyle:{"text-align":"center"}},[t._v("组件所在的页面被展示时执行")])]),t._v(" "),e("tr",[e("td",{staticStyle:{"text-align":"center"}},[t._v("hide")]),t._v(" "),e("td",{staticStyle:{"text-align":"center"}},[t._v("无")]),t._v(" "),e("td",{staticStyle:{"text-align":"center"}},[t._v("组件所在的页面被隐藏时执行")])]),t._v(" "),e("tr",[e("td",{staticStyle:{"text-align":"center"}},[t._v("resize")]),t._v(" "),e("td",{staticStyle:{"text-align":"center"}},[t._v("Object Size")]),t._v(" "),e("td",{staticStyle:{"text-align":"center"}},[t._v("组件所在的页面尺寸变化时执行")])]),t._v(" "),e("tr",[e("td",{staticStyle:{"text-align":"center"}},[t._v("routeDone")]),t._v(" "),e("td",{staticStyle:{"text-align":"center"}},[t._v("无")]),t._v(" "),e("td",{staticStyle:{"text-align":"center"}},[t._v("组件所在的页面路由动画完成时执行")])])])])])]),t._v(" "),e("p",[t._v("注意：自定义 tabBar 的 pageLifetime 不会触发。")]),t._v(" "),e("h3",{attrs:{id:"代码示例-4"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#代码示例-4"}},[t._v("#")]),t._v(" 代码示例")]),t._v(" "),e("div",{staticClass:"language- extra-class"},[e("pre",{pre:!0,attrs:{class:"language-text"}},[e("code",[t._v("Component({\n  pageLifetimes: {\n    show: function() {\n      // 页面被展示\n    },\n    hide: function() {\n      // 页面被隐藏\n    },\n    resize: function(size) {\n      // 页面尺寸变化\n    }\n  }\n})\n")])])])])}),[],!1,null,null,null);e.default=s.exports}}]);